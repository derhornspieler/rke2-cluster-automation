# ------------------------------------------------------------------
# Global settings
# ------------------------------------------------------------------
replicaCounts:
  controlPlane: 3          # number of RKE2 control‑plane VMs
  worker: 0            # number of RKE2 worker VMs

image:
  namespace: harvester-public        # Namespace that holds the VirtualMachineImage
  name: rocky-9-cloudimg             # Must exist in Harvester’s image catalog
  pullPolicy: IfNotPresent

vmNamePrefix: rke2                   # Prefix for generated VM names (defaults to Helm release name)

storage:
  className: ""                     # leave empty to use Harvester's per-image storage class
  accessMode: ReadWriteMany
  volumeMode: Block
  size: 30Gi
  controlPlaneSize: 100Gi
  workerSize: 150Gi

networks:
  vm:
    namespace: hvst-mgmt
    name: vlan2003                   # Workload VM network (VLAN 2003)
    interface: eth0                  # Guest interface name used in networkData
    prefix: 24                       # CIDR prefix length for static IPs
    gateway: ""                      # Optional gateway inserted into networkData
    nameservers: []                  # Optional DNS servers for static IPs
    macAddresses:
      controlPlane: []               # Optional list of MACs per control-plane VM
      worker: []                     # Optional list of MACs per worker VM
    staticIPs:
      controlPlane: []               # Optional static IPv4 list per control-plane VM
      worker: []                     # Optional static IPv4 list per worker VM

# Legacy Harvester LoadBalancer values (unused when kubeVip.enabled=true)
loadBalancer:
  enabled: false
  namespace: default
  vip: ""
  subnet: ""
  gateway: ""
  network: ""

kubeVip:
  enabled: true
  namespace: kube-system
  address: ""                        # Required when enabled
  interface: eth0
  image: ghcr.io/kube-vip/kube-vip:v0.8.8
  serviceAccountName: kube-vip       # ServiceAccount used by the static pod
  rbac:
    create: true                     # Set false if you manage kube-vip RBAC yourself

tlsSANs:
  - internal-vip.local

resources:
  controlPlane:
    cpuCores: 2
    memoryMi: 16386
  worker:
    cpuCores: 2
    memoryMi: 16386

ssh:
  user: rocky                     # user that cloud‑init will create
  publicKey: "ssh-ed25519 "  # fill with your SSH public key (optional)

rke2:
  token: ""  # will be filled from secret rke2-token
  version: "v1.33.5+rke2r1"        # RKE2 version you want to run
  cni: "canal"                     # or calico, multus, etc.
